<div class="invoices-container">


 <!-- Statistics Cards -->
 <div class="stats-grid">
  <div class="stat-card stat-total"
   [class.active]="isFilterActive('all')"
   (click)="filterByStatus('all')"
   role="button"
   tabindex="0"
   [attr.aria-label]="'Filter by all invoices'">
   <div class="stat-icon">
    <mat-icon>receipt_long</mat-icon>
   </div>
   <div class="stat-content">
    <div class="stat-label">{{ 'common.invoices.stats.total' | transloco }}</div>
    <div class="stat-value">{{ totalInvoices() }} {{ 'common.invoices.stats.invoices' | transloco }}</div>
   </div>
  </div>

  <div class="stat-card stat-shipped"
   [class.active]="isFilterActive('shipped')"
   (click)="filterByStatus('shipped')"
   role="button"
   tabindex="0"
   [attr.aria-label]="'Filter by shipped invoices'">
   <div class="stat-icon">
    <mat-icon>local_shipping</mat-icon>
   </div>
   <div class="stat-content">
    <div class="stat-label">{{ 'common.invoices.stats.shipped' | transloco }}</div>
    <div class="stat-value">{{ shippedInvoices() }} {{ 'common.invoices.stats.invoices' | transloco }}</div>
   </div>
  </div>

  <div class="stat-card stat-delivered"
   [class.active]="isFilterActive('delivered')"
   (click)="filterByStatus('delivered')"
   role="button"
   tabindex="0"
   [attr.aria-label]="'Filter by delivered invoices'">
   <div class="stat-icon">
    <mat-icon>check_circle</mat-icon>
   </div>
   <div class="stat-content">
    <div class="stat-label">{{ 'common.invoices.stats.delivered' | transloco }}</div>
    <div class="stat-value">{{ deliveredInvoices() }} {{ 'common.invoices.stats.invoices' | transloco }}</div>
   </div>
  </div>

  <div class="stat-card stat-pending"
   [class.active]="isFilterActive('pending')"
   (click)="filterByStatus('pending')"
   role="button"
   tabindex="0"
   [attr.aria-label]="'Filter by pending invoices'">
   <div class="stat-icon">
    <mat-icon>schedule</mat-icon>
   </div>
   <div class="stat-content">
    <div class="stat-label">{{ 'common.invoices.stats.pending' | transloco }}</div>
    <div class="stat-value">{{ pendingInvoices() }} {{ 'common.invoices.stats.invoices' | transloco }}</div>
   </div>
  </div>
 </div>

 <!-- Search and Add Button -->
 <div class="toolbar">
  <mat-form-field class="search-field"
   appearance="outline">
   <mat-icon matPrefix>search</mat-icon>
   <input matInput
    [placeholder]="'common.invoices.search_placeholder' | transloco"
    (keyup)="applyFilter($event)"
    [attr.aria-label]="'common.invoices.search_placeholder' | transloco">
  </mat-form-field>


  <button mat-flat-button
   color="primary"
   (click)="addInvoice()">
   {{ 'common.invoices.add_invoice' | transloco }}
   <mat-icon iconPositionEnd>add</mat-icon>
  </button>
 </div>

 <!-- Invoices Table -->
 <div class="table-card">
  <table mat-table
   [dataSource]="dataSource"
   class="invoices-table"
   [attr.aria-label]="'common.invoices.title' | transloco">

   <!-- ID Column -->
   <ng-container matColumnDef="id">
    <th mat-header-cell
     *matHeaderCellDef>{{ 'common.invoices.table.id' | transloco }}</th>
    <td mat-cell
     *matCellDef="let invoice">{{ invoice.id }}</td>
   </ng-container>

   <!-- Bill From Column -->
   <ng-container matColumnDef="billFrom">
    <th mat-header-cell
     *matHeaderCellDef>{{ 'common.invoices.table.bill_from' | transloco }}</th>
    <td mat-cell
     *matCellDef="let invoice">{{ invoice.billFrom }}</td>
   </ng-container>

   <!-- Bill To Column -->
   <ng-container matColumnDef="billTo">
    <th mat-header-cell
     *matHeaderCellDef>{{ 'common.invoices.table.bill_to' | transloco }}</th>
    <td mat-cell
     *matCellDef="let invoice">{{ invoice.billTo }}</td>
   </ng-container>

   <!-- Total Cost Column -->
   <ng-container matColumnDef="totalCost">
    <th mat-header-cell
     *matHeaderCellDef>{{ 'common.invoices.table.total_cost' | transloco }}</th>
    <td mat-cell
     *matCellDef="let invoice">{{ invoice.totalCost }}</td>
   </ng-container>

   <!-- Status Column -->
   <ng-container matColumnDef="status">
    <th mat-header-cell
     *matHeaderCellDef>{{ 'common.invoices.table.status' | transloco }}</th>
    <td mat-cell
     *matCellDef="let invoice">
     <span class="status-badge"
      [class.status-shipped]="invoice.status === 'shipped'"
      [class.status-delivered]="invoice.status === 'delivered'"
      [class.status-pending]="invoice.status === 'pending'">
      {{ 'common.invoices.status.' + invoice.status | transloco }}
     </span>
    </td>
   </ng-container>

   <!-- Actions Column -->
   <ng-container matColumnDef="actions">
    <th mat-header-cell
     *matHeaderCellDef
     class="actions-header">{{ 'common.invoices.table.action' | transloco }}</th>
    <td mat-cell
     *matCellDef="let invoice"
     class="actions-cell">
     <div class="action-icons">
      <mat-icon (click)="editInvoice(invoice)"
       [attr.aria-label]="'common.invoices.actions.edit' | transloco"
       role="button"
       tabindex="0">edit</mat-icon>
      <mat-icon (click)="viewInvoice(invoice)"
       [attr.aria-label]="'common.invoices.actions.view' | transloco"
       role="button"
       tabindex="0">visibility</mat-icon>
      <mat-icon (click)="deleteInvoice(invoice)"
       [attr.aria-label]="'common.invoices.actions.delete' | transloco"
       role="button"
       tabindex="0">delete</mat-icon>
     </div>
    </td>
   </ng-container>

   <tr mat-header-row
    *matHeaderRowDef="displayedColumns"></tr>
   <tr mat-row
    *matRowDef="let row; columns: displayedColumns"></tr>
  </table>

  <mat-paginator [pageSizeOptions]="[5, 10, 20]"
   showFirstLastButtons
   [attr.aria-label]="'common.invoices.title' | transloco"
   class="invoices-paginator">
  </mat-paginator>
 </div>
</div>