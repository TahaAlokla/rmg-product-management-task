<div class="products-container">
  <div class="header">
    <div>
      <h2>{{ 'common.products.title' | transloco }}</h2>
      <p class="subtitle">{{ 'common.dashboard.products_desc' | transloco }}</p>
    </div>
    <div class="toolbar">
      <button mat-flat-button color="primary" (click)="openAdd()">
        {{ 'common.products.add' | transloco }}
        <mat-icon iconPositionEnd>add</mat-icon>
      </button>
    </div>
  </div>

  <div class="table-card">
   
    <table
      mat-table
      [dataSource]="productService.products()"
      class="products-table "
      aria-label="Products list"
    >
    <ng-container matColumnDef="image">
      <th mat-header-cell *matHeaderCellDef>{{ 'common.products.image' | transloco }}</th>
      <td mat-cell *matCellDef="let p">
        <div class="image-wrap">
          <img [ngSrc]="p?.imageUrl" width="44" height="44" alt="{{ p.name }}" />
        </div>
      </td>
    </ng-container>
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>{{ 'common.products.name' | transloco }}</th>
      <td mat-cell *matCellDef="let p">
        <div class="name-cell">{{ p.name }}</div>
      </td>
    </ng-container>

    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef>{{ 'common.products.description' | transloco }}</th>
      <td mat-cell *matCellDef="let p">
        <div class="desc-cell">{{ p.description }}</div>
      </td>
    </ng-container>

    <ng-container matColumnDef="price">
      <th mat-header-cell *matHeaderCellDef>{{ 'common.products.price' | transloco }}</th>
      <td mat-cell *matCellDef="let p">
        <span class="price-pill">{{ p.price | number: '1.2-2' }} $</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef class="actions-header">{{ 'common.products.actions' | transloco }}</th>
      <td mat-cell *matCellDef="let p" class="actions-cell">
        <button mat-icon-button [attr.aria-label]="'common.products.edit_aria' | transloco" (click)="openEdit(p)">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button [attr.aria-label]="'common.products.delete_aria' | transloco" (click)="deleteProduct(p.id)">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>

      <tr mat-header-row *matHeaderRowDef="['image', 'name', 'description', 'price', 'actions']"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: ['image', 'name', 'description', 'price', 'actions']"
      ></tr>
    </table>
  </div>
</div>
